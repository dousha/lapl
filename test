# The testing file
# This file contains the 'Standard' test of LAPL
# If anywhere went wrong in the code, e.g. stack overflow, it means
# THERE'S SOMETHING WRONG WITH THIS MATHERFAUQER

# Basic output
(print Hello form LAPL!)
(newline)
# Expects:
# Hello from LAPL!
# Note: `print` function does not insert CRLF automatically
# One have to use `newline` function to break a line

# Basic arithmetic operations
(print (/ (* (+ 1 1) 3) 2))
(newline)
# Expects:
# 3.0

# Global variable definition and referring
(set! i 15)
(print (+1 i))
(newline)
# Expects:
# 16.0

# `let` operator shadowing
(let i 12.5 (
	(let i 10 ((display i)))
	(display i)))
(display i)
# Expects:
# 10.0
# 12.5
# 15.0

# Function definition and calling
(def (plus-two x) (+ x 2))
(print (plus-two 2))
(newline)
# Expects:
# 4.0

# Currying
(def (g x) (x 5))
(def (h x) (* 2 x))
(print (g h))
(newline)
# Expects:
# 10.0

# Function as formal parameter
(def (f x) (print (x)))
(def (f') (+ 1 1))
(print (f f'))
(newline)
# Expects:
# 2.0

# Passing an anonymous function
(def (for from to step @body)
	(let i from (
		(while (< i to) (
			(@body)
			(set! i (+ i step)))))))
(for 0 5 1 ((print (ret i)) (newline)))
# Expects:
# 0.0
# 1.0
# 2.0
# 3.0
# 4.0

# Recursion
(def (factorial x) (if (= x 1) (ret 1) (* x (factorial (- x 1)))))
(print (factorial 5))
(newline)
# Expects:
# 120.0

# Array
(arr! arr1 1 2 i 4 5)
(print (len arr1))
(newline)
(print (read-at arr1 2))
(newline)
(write-at arr1 2 10)
(print (read-at arr1 2))
(newline)
(print (ret i))
(newline)
# Expects:
# 5.0
# 15.0
# 10.0
# 15.0
# Note: This also shows that when creating an array
# The value of an variable is passed in.

# TEST SUCCESS!
(print test success!)
(newline)